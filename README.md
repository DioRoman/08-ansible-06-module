# 08-ansible-06-module

# Краткое описание модулей Ansible

## 1. Модуль создания и обновления файла (`my_own_module`)

Модуль предназначен для создания текстового файла по заданному пути с указанным содержимым. Позволяет автоматически создавать родительские директории. Если файл существует, но его содержимое отличается от переданного, модуль перезапишет файл; если содержимое совпадает — изменений не вносит (идемпотентность).

**Основные параметры:**
- `path` — путь к создаваемому файлу;
- `content` — содержимое для записи в файл.

**Ключевые особенности:**
- Создаёт файл с требуемым содержимым, либо обновляет существующий.
- Самостоятельно создаёт директории по пути при необходимости.
- Поддерживает режим проверки (check mode).

---

## 2. Модуль создания виртуальной машины в Yandex Cloud через CLI (`create_vm`)

Модуль автоматизирует создание виртуальной машины (ВМ) в Yandex Cloud с помощью официальной утилиты CLI (`yc`). Проверяет, существует ли ВМ с заданным именем (работает идемпотентно) и создаёт новую только при отсутствии существующей. Поддерживается передача параметров, таких как количество CPU, объём памяти, размер диска, ID образа, зона размещения и путь к публичному SSH-ключу.

**Основные параметры:**
- `folder_id` — идентификатор папки Yandex Cloud;
- `zone` — зона размещения;
- `vm_name` — имя создаваемой ВМ;
- `core_count`, `memory_gb`, `disk_size_gb` — ресурсы ВМ;
- `image_id` — ID образа диска;
- `ssh_key_path` — путь к публичному SSH-ключу.

**Ключевые особенности:**
- Полная идемпотентность (ВМ с тем же именем не пересоздаётся).
- Проверка наличия SSH-ключа и прав на создание ресурсов.
- Перед использованием требует существующих VPC и Подсети (VPC и Subnets).
- Не изменяет существующую ВМ.

---
